# KeyFlash Environment Variables
# Copy this file to .env.local and fill in your values

# ============================================
# API Keys (Choose ONE provider to start)
# ============================================

# Option 1: DataForSEO API (Recommended)
# Sign up at: https://dataforseo.com/ (pay-as-you-go pricing)
DATAFORSEO_API_LOGIN=
DATAFORSEO_API_PASSWORD=

# Option 2: Google Ads API (Alternative)
# Get credentials from: https://developers.google.com/google-ads/api/docs/first-call/overview
GOOGLE_ADS_CLIENT_ID=
GOOGLE_ADS_CLIENT_SECRET=
GOOGLE_ADS_DEVELOPER_TOKEN=
GOOGLE_ADS_REFRESH_TOKEN=
GOOGLE_ADS_CUSTOMER_ID=

# Active Provider (dataforseo | google-ads | mock)
# Default: mock (for development without API credentials)
KEYWORD_API_PROVIDER=mock

# ============================================
# Redis Cache (Upstash)
# ============================================
# Free tier: https://upstash.com/
UPSTASH_REDIS_REST_URL=
UPSTASH_REDIS_REST_TOKEN=

# ============================================
# CORS Configuration
# ============================================
# Comma-separated list of additional allowed origins for CORS
# Production domain is automatically included
# Example: ALLOWED_ORIGINS=https://app.example.com,https://admin.example.com
ALLOWED_ORIGINS=

# ============================================
# External API Timeout Configuration
# ============================================
# Timeout values for external API requests are defined in src/lib/utils/fetch-with-timeout.ts
# - DEFAULT: 30000ms (30s) for standard API calls (DataForSEO, SERP)
# - AUTH: 10000ms (10s) for OAuth token refresh
# - HEALTH: 5000ms (5s) for health checks
# - WEBHOOK: 15000ms (15s) for webhook deliveries
# These are hardcoded constants optimized for reliability.
# To customize timeouts, edit src/lib/utils/fetch-with-timeout.ts

# ============================================
# Monitoring & Error Tracking
# ============================================

# Sentry (Error tracking)
# Free tier: https://sentry.io/
NEXT_PUBLIC_SENTRY_DSN=
SENTRY_DSN=
SENTRY_AUTH_TOKEN=
SENTRY_ENVIRONMENT=development
SENTRY_ORG=
SENTRY_PROJECT=keyflash

# Vercel Analytics (Automatic on Vercel deployment)
# No configuration needed

# ============================================
# Privacy & Data Handling
# ============================================

# CRITICAL: Privacy mode controls keyword storage behavior
# true  = No keyword caching (slower but privacy-focused)
# false = Cache keywords for 7 days (faster but stores search terms)
# Default is false (caching ON). Set to true only if your privacy promise requires
# no keyword storage.
PRIVACY_MODE=false

# ============================================
# Rate Limiting (Redis-based, spoof-resistant)
# ============================================
RATE_LIMIT_REQUESTS_PER_HOUR=10
RATE_LIMIT_ENABLED=true

# CRITICAL: Rate limiter fail-safe behavior when Redis fails
# open   = Allow requests when rate limiter fails (less secure, better availability)
# closed = Deny requests when rate limiter fails (more secure, may impact availability)
# Default: 'closed' in production, 'open' in development
RATE_LIMIT_FAIL_SAFE=closed

# CRITICAL: HMAC secret for spoof-resistant client identification
# REQUIRED: Generate a unique random secret for production
# DO NOT use the placeholder below - generate your own with: openssl rand -base64 32
# Used to create HMAC of user-agent headers to prevent rate limit bypassing
RATE_LIMIT_HMAC_SECRET=

# CRITICAL: Trust proxy headers (cf-connecting-ip, x-forwarded-for, x-real-ip)
# Must be true in production to enforce per-client rate limits safely
RATE_LIMIT_TRUST_PROXY=true

# ============================================
# Authentication (Clerk)
# ============================================
# Get keys from: https://dashboard.clerk.com/
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_...
CLERK_SECRET_KEY=sk_test_...

# ============================================
# Billing (Optional - for commercial deployment)
# ============================================
# Set to 'true' to enable Stripe payments and tier restrictions
# Default: false (open source mode - all features free)
BILLING_ENABLED=false

# Stripe (only needed when BILLING_ENABLED=true)
# Get keys from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...
STRIPE_PRICE_PRO=price_...  # Monthly Pro subscription price ID

# ============================================
# Development
# ============================================
NODE_ENV=development
NEXT_PUBLIC_APP_URL=http://localhost:3000

# ============================================
# Production (Vercel will set these automatically)
# ============================================
# NODE_ENV=production
# NEXT_PUBLIC_APP_URL=https://keyflash.com
# VERCEL_URL=keyflash.vercel.app (set by Vercel)
# VERCEL_ENV=production (set by Vercel: production|preview|development)

# ============================================
# CI/CD & Testing
# ============================================

# CI environment (automatically set by CI providers)
# CI=true

# Package version (automatically set by npm)
# npm_package_version=1.0.0

# Lighthouse CI GitHub Integration (Optional)
# For posting Lighthouse results to GitHub PRs
# Get token from: https://github.com/settings/tokens (repo scope)
# LHCI_GITHUB_APP_TOKEN=
